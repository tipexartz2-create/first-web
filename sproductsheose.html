<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEST NILE ONLINE SHOP Product Details</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

<section id="header">
    <a href="#"><img src="tipexx/14.png" class="logo" alt=""></a> 
    <div>
        <ul id="navbar">
            <li><a href="INDEX.html">Home</a></li>
            <li><a href="fashion.html">Fashion</a></li>
            <li><a class="active" href="electronic.html">Electronic</a></li>
            <li><a class="active" href="phone.html">Phones</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li id="close"><i class="fas fa-times"></i></li> 
            <li id="lg-bag"><a href="cart.htm"><i class="fas fa-shopping-bag"></i></a></li>
        </ul>
    </div> 
    <div id="mobile">
        <i id="bar" class="fas fa-outdent"></i>
    </div>
</section>

<section id="prodetails" class="section-p1">
    <div class="single-pro-image">
        <img src="" width="100%" id="MainImg" alt="">

        <div class="small-img-group">
            <div class="small-img-col"><img src="" width="100%" class="small-img"></div>
            <div class="small-img-col"><img src="" width="100%" class="small-img"></div>
            <div class="small-img-col"><img src="" width="100%" class="small-img"></div>
            <div class="small-img-col"><img src="" width="100%" class="small-img"></div>
        </div>
    </div>

    <div class="single-pro-details">
        <h6>Select & Order</h6>
        <h4 id="productName">Loading Product...</h4> 
        <h2 id="productPrice">Please select size...</h2> 
        
        <!-- SIZE SELECT -->
        <select id="sizeSelector" required> 
            <option value="">Select size</option>
            <option value="36">36</option>
            <option value="37">37</option>
            <option value="38">38</option>
            <option value="40">40</option>
            <option value="41">41</option>
            <option value="42">42</option>
        </select>
        
        <input type="number" value="1" id="quantityInput" min="1"> 
        <button class="nomal" onclick="sendToWhatsApp()">Order Now</button> 
        
        <h4>Product Details</h4>
        <span id="productDesc">Strong and Original</span>
    </div>
</section>

<footer class="section-p1">
    <p>Since 2025</p>
</footer>

<script>
/* ---------- NAV ---------- */
const bar = document.getElementById('bar');
const close = document.getElementById('close');
const nav = document.getElementById('navbar');

if (bar) bar.addEventListener('click', () => nav.classList.add('active'));
if (close) close.addEventListener('click', () => nav.classList.remove('active'));

/* ---------- IMAGE GALLERY ---------- */
var MainImg = document.getElementById("MainImg");
var smalling = document.getElementsByClassName("small-img");

for (let i = 0; i < smalling.length; i++) {
    smalling[i].onclick = function () {
        MainImg.src = smalling[i].src;
    }
}

/* ---------- DYNAMIC PRODUCT DATA ---------- */
let productActualPrice = "";

window.onload = function () {
    const urlParams = new URLSearchParams(window.location.search);
    const name = urlParams.get('name');
    const price = urlParams.get('price');
    const img1 = urlParams.get('img1');
    const img2 = urlParams.get('img2');
    const img3 = urlParams.get('img3');
    const img4 = urlParams.get('img4');

    if (name) document.getElementById("productName").innerText = name;

    if (price) {
        productActualPrice = price;
        document.getElementById("productPrice").innerText = "Please select size...";
    }

    if (img1) { MainImg.src = img1; smalling[0].src = img1; }
    if (img2) smalling[1].src = img2;
    if (img3) smalling[2].src = img3;
    if (img4) smalling[3].src = img4;
};

/* ---------- SHOW PRICE AFTER SIZE ---------- */
document.getElementById("sizeSelector").addEventListener("change", function () {
    const priceDisplay = document.getElementById("productPrice");

    if (this.value !== "") {
        priceDisplay.innerText = "UGX " + productActualPrice + "/=";
    } else {
        priceDisplay.innerText = "Please select size...";
    }
});

/* ---------- WHATSAPP ORDER ---------- */
function sendToWhatsApp() {
    const phoneNumber = "256761680128"; 
    const name = document.getElementById("productName").innerText;
    const price = document.getElementById("productPrice").innerText;
    const size = document.getElementById("sizeSelector").value;
    const quantity = document.getElementById("quantityInput").value;

    // BLOCK ORDER IF SIZE NOT SELECTED
    if (size === "") {
        alert("Please select a size before ordering!");
        return;
    }

    const message = encodeURIComponent(
        `Hello! I would like to order:\n\n` + 
        `Product: ${name}\n` + 
        `Size: ${size}\n` + 
        `Quantity: ${quantity}\n` + 
        `Price: ${price}`
    );

    window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');
}
</script>

</body>
</html>
